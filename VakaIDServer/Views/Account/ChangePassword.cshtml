@model VakaxaIDServer.Quickstart.Account.ChangePasswordViewModel

<h2>Change Password</h2>

<form asp-controller="Account" asp-action="ChangePassword" method="post">
    @* <div asp-validation-summary="All"></div> *@

    <input asp-for="Code" type="hidden"/>
    <div class="form-group">
        <div class="col-md-10">
            <label asp-for="Email" class="control-label"></label>
            <input type="text" class="form-control" asp-for="Email" placeholder="Email"/><br/>
            <span asp-validation-for="Email" class="text-danger"></span>
        </div>
    </div>
    <div class="form-group">
        <div class="col-md-10">
            <label asp-for="OldPassword" class="control-label"></label>
            <input type="password" class="form-control" asp-for="OldPassword" placeholder="Old Password"/><br/>
            <span asp-validation-for="OldPassword" class="text-danger"></span>
        </div>
    </div>
    <div class="form-group">
        <div class="col-md-10">
            <label asp-for="Password" class="control-label"></label>
            <input type="password" class="form-control" asp-for="Password" placeholder="Password"/><br/>
            <span asp-validation-for="Password" class="text-danger"></span>
        </div>
    </div>
    <div class="form-group">
        <div class="col-md-10">
            <label asp-for="ConfirmPassword" class="control-label">Confirm Password</label>
            <input type="password" class="form-control" asp-for="ConfirmPassword" placeholder="Confirm Password"/><br/>
            <span asp-validation-for="ConfirmPassword" class="text-danger"></span>
        </div>
    </div>
    <div class="form-group">
        <button class="btn btn-primary" type="submit" value="Reset" id="resetPassword">
            Reset
            <i id="loading" class='fa fa-spinner fa-spin' style="display: none"></i>
        </button>
    </div>
</form>

@section Scripts {
    @{ await Html.RenderPartialAsync("_ValidationScriptsPartial"); }
    <script>
        $("#resetPassword").click(function() {
            $(this).prop('disabled', true);
            var x = document.getElementById("loading");
            x.style.display = "inline-block";
            $(this).closest("form").submit();
        });
    </script>
}